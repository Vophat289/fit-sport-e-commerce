<!-- news.component.html -->
<div class="news-container">

  <!-- ================= LANDING PAGE ================= -->
  <div class="news-landing" *ngIf="!hasSelectedArticle">



    <!-- TOP SECTION: Grid Layout -->
    <section class="top-section">

      <!-- LEFT COLUMN (Hero + Sub-featured) -->
      <div class="top-left-col">

        <!-- Hero Post -->
        <div class="featured-wrapper" *ngIf="featuredNews">
          <a [routerLink]="[featuredNews.slug]" class="featured-card">
            <div class="img-box">
              <img [src]="featuredNews.thumbnail" [alt]="featuredNews.title" (error)="handleImageError($event)">
              <div class="overlay-gradient"></div>
            </div>
            <div class="featured-content">
              <span class="category-badge">TRENDING NOW</span>
              <h2 class="featured-title">{{ featuredNews.title }}</h2>
              <p class="featured-desc" *ngIf="featuredNews.short_desc">{{ featuredNews.short_desc | slice:0:100 }}...
              </p>
            </div>
          </a>
        </div>

        <!-- Sub-featured Row (3 items) -->
        <div class="sub-featured-grid">
          <div class="sub-item" *ngFor="let item of subFeaturedNews">
            <a [routerLink]="[item.slug]" class="sub-link">
              <div class="sub-img">
                <img [src]="item.thumbnail" [alt]="item.title" (error)="handleImageError($event)">
              </div>
              <div class="sub-info">
                <span class="category-label-small">HOT</span>
                <h3 class="sub-title">{{ item.title }}</h3>
              </div>
            </a>
          </div>
        </div>

      </div>

      <!-- RIGHT COLUMN (Side List) -->
      <div class="top-right-col">
        <div class="side-list-wrapper">
          <div class="side-item" *ngFor="let item of sideNews">
            <a [routerLink]="[item.slug]" class="side-link">
              <div class="side-img">
                <img [src]="item.thumbnail" [alt]="item.title" (error)="handleImageError($event)">
              </div>
              <div class="side-info">
                <span class="category-label">NEWS</span>
                <h3 class="side-title">{{ item.title }}</h3>
              </div>
            </a>
          </div>
        </div>
      </div>

    </section>

    <!-- BOTTOM SECTION: Weekly Top News -->
    <section class="weekly-section">
      <div class="section-header">
        <h2 class="section-title">Tin tức nổi bật tuần</h2>
        <div class="section-line"></div>
      </div>

      <div class="news-grid">
        <article class="news-card" *ngFor="let item of paginatedNews">
          <a [routerLink]="[item.slug]" class="card-link">
            <div class="card-img">
              <img [src]="item.thumbnail" [alt]="item.title" loading="lazy" (error)="handleImageError($event)">
            </div>
            <div class="card-content">
              <h3 class="card-title">{{ item.title }}</h3>
              <div class="card-meta">
                <span class="date">{{ item.createdAt | date:'dd/MM/yyyy' }}</span>
              </div>
            </div>
          </a>
        </article>
      </div>

      <!-- Pagination -->
      <div class="pagination-wrapper" *ngIf="totalPages > 1">
        <button class="pagination-btn" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
          <i class="fa fa-angle-left"></i> Prev
        </button>
        <span class="pagination-info">{{ currentPage }} / {{ totalPages }}</span>
        <button class="pagination-btn" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
          Next <i class="fa fa-angle-right"></i>
        </button>
      </div>
    </section>

  </div>

  <!-- ================= DETAIL PAGE ================= -->
  <!-- ================= DETAIL PAGE ================= -->
  <div class="news-detail-view" *ngIf="hasSelectedArticle">

    <div class="back-nav">
      <a routerLink="/news" class="back-link">← Quay lại Tin tức</a>
    </div>

    <div class="detail-layout">
      <!-- LEFT: Article Content -->
      <div class="detail-content">
        <router-outlet></router-outlet>
      </div>

      <!-- RIGHT: Side List (Reused) -->
      <div class="detail-sidebar">
        <h3 class="sidebar-title">Có thể bạn quan tâm</h3>
        <div class="side-list-wrapper">
          <div class="side-item" *ngFor="let item of sideNews">
            <a [routerLink]="['/news', item.slug]" class="side-link">
              <div class="side-img">
                <img [src]="item.thumbnail" [alt]="item.title" (error)="handleImageError($event)">
              </div>
              <div class="side-info">
                <span class="category-label">NEWS</span>
                <h3 class="side-title">{{ item.title }}</h3>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>