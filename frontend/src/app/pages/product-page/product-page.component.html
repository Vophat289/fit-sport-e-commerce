<section class="product-section">

  <!-- üîπ Thanh ch·ªçn danh m·ª•c -->
  <div class="category-bar" *ngIf="categories.length > 0">
    <button 
      (click)="resetFilter()"
      [class.active]="!selectedCategory">
      T·∫•t c·∫£
    </button>

    <button
      *ngFor="let cat of categories"
      (click)="filterByCategory(cat._id!)"
      [class.active]="selectedCategory === cat._id">
      {{ cat.name }}
    </button>
  </div>

  <!-- üîπ Loading -->
  <p *ngIf="loading" class="loading">ƒêang t·∫£i s·∫£n ph·∫©m...</p>

  <!-- üîπ Danh s√°ch s·∫£n ph·∫©m -->
  <div class="product-list" *ngIf="!loading && products.length > 0">
    <div class="product-card" *ngFor="let product of products">
      
      <!-- ·∫¢nh -->
      <div class="product-image">
        <img
          [src]="product.image && product.image.length ? product.image[0] : 'assets/images/placeholder.jpg'"
          [alt]="product.name"
          class="product-img"
        />
        <div class="product-overlay">
          <button class="btn-detail">Xem chi ti·∫øt</button>
          <button class="btn-buy">Mua ngay</button>
        </div>
      </div>

      <!-- Th√¥ng tin -->
      <div class="product-info">
        <h3 class="product-name">{{ product.name }}</h3>
        <p class="product-price">{{ product.price | number }} ‚Ç´</p>
      </div>

      <!-- N√∫t th√™m gi·ªè -->
      <div class="product-action">
        <button class="btn-cart" (click)="addToCart(product)">
          Th√™m v√†o gi·ªè h√†ng
        </button>
      </div>
    </div>
  </div>

  <!-- üîπ Kh√¥ng c√≥ s·∫£n ph·∫©m -->
  <p *ngIf="!loading && products.length === 0" class="empty">
    Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y.
  </p>

  <!-- Loading -->
  <p *ngIf="loading" class="loading">ƒêang t·∫£i s·∫£n ph·∫©m...</p>

  <!-- Danh s√°ch s·∫£n ph·∫©m -->
  <div class="product-list" *ngIf="!loading && products.length > 0">

    <div class="product-card" *ngFor="let product of products">
      
      <!-- ·∫¢NH S·∫¢N PH·∫®M -->
      <div class="product-image">
        <img 
          [src]="product.image && product.image.length > 0 ? product.image[0] : 'assets/images/placeholder.jpg'" 
          [alt]="product.name"
          class="product-img"
        />

        <!-- Overlay khi hover -->
        <div class="product-overlay">
          <button class="btn-detail">Xem chi ti·∫øt</button>
          <button class="btn-buy">Mua ngay</button>
        </div>
      </div>  

      <!-- TH√îNG TIN S·∫¢N PH·∫®M -->
      <div class="product-info">
        <h3 class="product-name">{{ product.name }}</h3>
        <p class="product-price">{{ product.price | number }} ‚Ç´</p>

        <div *ngIf="product?.colors?.length" class="product-colors">
          <span *ngFor="let c of product.colors"
                class="color-dot"
                [style.backgroundColor]="c"
                [title]="c"></span>
        </div>

        <div *ngIf="product?.sizes?.length" class="product-sizes">
          <span *ngFor="let s of product.sizes" class="size-tag">{{ s }}</span>             
        </div>
      </div>

      <!-- ‚úÖ N√öT TH√äM V√ÄO GI·ªé -->
      <div class="product-action">
        <button class="btn-cart" (click)="addToCart(product)">
           Th√™m v√†o gi·ªè h√†ng
        </button>
      </div>

    </div>
  </div>

  <!-- N·∫øu kh√¥ng c√≥ s·∫£n ph·∫©m -->
  <p *ngIf="!loading && products.length === 0" class="empty">
    Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o
  </p>
</section>    