<section class="product-section">
  <div class="product-container">
    
    <!-- üîπ SIDEBAR FILTER (B√™n tr√°i) -->
    <aside class="filter-sidebar">
      
      <!-- 1. FILTER CATEGORY -->
      <div class="filter-group">
        <h3 class="filter-title">Danh m·ª•c</h3>
        <button 
          (click)="filterByCategory(null)"
          [class.active]="!filters.category"
          class="filter-btn">
          T·∫•t c·∫£
        </button>
        <button
          *ngFor="let cat of categories"
          (click)="filterByCategory(cat.slug!)"
          [class.active]="filters.category === cat.slug"
          class="filter-btn">
          {{ cat.name }}
        </button>
      </div>
      
      <!-- 2. FILTER SIZE -->
      <div class="filter-group">
        <h3 class="filter-title">K√≠ch th∆∞·ªõc</h3>
        <div class="size-options">
          <!-- 
            KH√ÅI NI·ªÜM: *ngFor - Directive l·∫∑p qua m·∫£ng
            - L·∫∑p qua availableSizes ƒë·ªÉ t·∫°o checkbox cho m·ªói size
          -->
          <label 
            *ngFor="let size of availableSizes"
            class="size-checkbox">
            <!-- 
              KH√ÅI NI·ªÜM: [checked] - Property binding
              - Checkbox ƒë∆∞·ª£c check n·∫øu size c√≥ trong filters.sizes
            -->
            <input 
              type="checkbox"
              [checked]="filters.sizes.includes(size)"
              (change)="toggleSize(size)">
            <span class="size-label">{{ size }}</span>
          </label>
        </div>
      </div>
      
      <!-- 3. FILTER PRICE (Slider) -->
      <div class="filter-group">
        <h3 class="filter-title">CH·ªåN GI√Å</h3>
        <div class="price-slider">
          <!-- Input Min -->
          <input 
            type="number"
            [(ngModel)]="filters.priceRange.min"
            (ngModelChange)="updatePriceRange(filters.priceRange.min, filters.priceRange.max)"
            class="price-input"
            [min]="20000"
            [max]="14999000">
          
          <!-- Slider Container -->
          <div class="slider-container">
            <!-- 
              KH√ÅI NI·ªÜM: type="range" - HTML5 Range Input
              - T·∫°o thanh k√©o (slider)
              - [(ngModel)]: Two-way binding v·ªõi filters.priceRange.min
              - (input): Event khi user k√©o slider
            -->
            <input 
              type="range"
              [min]="20000"
              [max]="14999000"
              [(ngModel)]="filters.priceRange.min"
              (input)="updatePriceRange(filters.priceRange.min, filters.priceRange.max)"
              class="slider slider-min">
            
            <input 
              type="range"
              [min]="20000"
              [max]="14999000"
              [(ngModel)]="filters.priceRange.max"
              (input)="updatePriceRange(filters.priceRange.min, filters.priceRange.max)"
              class="slider slider-max">
          </div>
          
          <!-- Input Max -->
          <input 
            type="number"
            [(ngModel)]="filters.priceRange.max"
            (ngModelChange)="updatePriceRange(filters.priceRange.min, filters.priceRange.max)"
            class="price-input"
            [min]="20000"
            [max]="14999000">
        </div>
        
        <!-- Hi·ªÉn th·ªã gi√° ƒë√£ ch·ªçn -->
        <p class="price-display">
          {{ filters.priceRange.min | number }} ‚Ç´ - 
          {{ filters.priceRange.max | number }} ‚Ç´
        </p>
      </div>
      
      <!-- Button Reset -->
      <button class="btn-reset" (click)="resetFilters()">
        X√≥a b·ªô l·ªçc
      </button>
      
    </aside>
    
    <!-- üîπ PRODUCT CONTENT (B√™n ph·∫£i) -->
    <div class="product-content">
      
      <!-- Loading -->
      <p *ngIf="loading" class="loading">ƒêang t·∫£i s·∫£n ph·∫©m...</p>
      
      <!-- Danh s√°ch s·∫£n ph·∫©m -->
      <!-- ‚ö†Ô∏è QUAN TR·ªåNG: D√πng filteredProducts, kh√¥ng ph·∫£i products -->
      <div class="product-list" *ngIf="!loading && filteredProducts.length > 0">
        <div class="product-card" *ngFor="let product of filteredProducts">
          <!-- ·∫¢nh -->
          <div class="product-image">
            <img
              [src]="
                product.image && product.image.length
                  ? product.image[0]
                  : 'assets/images/placeholder.jpg'
              "
              [alt]="product.name"
              class="product-img"
            />
            <div class="product-overlay">
              <button class="btn-detail">Xem chi ti·∫øt</button>
              <button class="btn-buy">Mua ngay</button>
            </div>
          </div>
          
          <!-- Th√¥ng tin -->
          <div class="product-info">
            <h3 class="product-name">{{ product.name }}</h3>
            <p class="product-price">{{ product.price | number }} ‚Ç´</p>
          </div>
          
          <!-- N√∫t th√™m gi·ªè -->
          <div class="product-action">
            <button class="btn-cart" (click)="addToCart(product)">
              Th√™m v√†o gi·ªè h√†ng
            </button>
          </div>
        </div>
      </div>
      
      <!-- Empty State -->
      <p *ngIf="!loading && filteredProducts.length === 0" class="empty">
        Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc.
      </p>
      
    </div>
    
  </div>
</section>