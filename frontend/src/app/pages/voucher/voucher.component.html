<div class="voucher-page fade-in">

  <h2 class="title">Voucher của tôi</h2>

  <div *ngIf="isLoggedIn; else noLogin" class="content">

    <!-- FILTER TABS -->
    <div class="tabs">
      <span (click)="applyFilter('all')" [class.active]="activeFilter === 'all'">Tất cả</span>
      <span (click)="applyFilter('valid')" [class.active]="activeFilter === 'valid'">Còn hiệu lực</span>
      <span (click)="applyFilter('expiring')" [class.active]="activeFilter === 'expiring'">Sắp hết hạn</span>
      <span (click)="applyFilter('expired')" [class.active]="activeFilter === 'expired'">Hết hạn</span>
    </div>

    <p class="count">
      Hiện tại bạn có <b>{{ filteredVouchers.length }}</b> voucher khả dụng
    </p>

    <!-- Loading animation -->
    <div *ngIf="loading" class="loader"></div>

    <!-- Không có voucher -->
    <div *ngIf="!loading && filteredVouchers.length === 0" class="empty">
      Không có voucher nào
    </div>

    <!-- Voucher LIST -->
    <div class="voucher-list">
      <div *ngFor="let v of filteredVouchers" class="voucher-card slide-up">

        <div class="header" [style.background]="v.type === 'percent' ? '#00AEEF' : '#FF5252'">
          <h3>{{ v.type === 'percent' ? 'Giảm ' + v.value + '%' : 'Giảm ' + v.value + 'k' }}</h3>
        </div>

        <div class="body">
          <p>Đơn tối thiểu {{ v.min_order_value | number }}đ</p>
          <p>HSD: {{ v.end_date | date:'dd/MM/yyyy' }}</p>

          <h4 class="code">{{ v.code }}</h4>

          <button (click)="copyCode(v.code)">Sao chép mã</button>
        </div>

      </div>
    </div>

    <div class="center">
      <button class="load-more">Xem thêm...</button>
    </div>

  </div>

  <!-- Không đăng nhập -->
  <ng-template #noLogin>
    <div class="not-login fade-in">
      Bạn cần đăng nhập để xem voucher
    </div>
  </ng-template>

</div>
