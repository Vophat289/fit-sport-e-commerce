<div class="dashboard">
  <!-- Stats Cards Section -->
  <div class="stats-grid">

    <!-- Card 1: Tổng người dùng -->
    <div class="stat-card blue" (click)="navigateTo('/admin/manager-user')" style="cursor: pointer;">
      <div class="stat-number">{{ stats.totalUsers }}</div>
      <div class="stat-label">Tổng người dùng</div>
      <div class="stat-date">Ngày cập nhật: {{ statsUpdated.users }}</div>
    </div>

    <!-- Card 2: Tổng đơn hàng -->
    <div class="stat-card purple" (click)="navigateTo('/admin/orders')" style="cursor: pointer;">
      <div class="stat-number">{{ stats.totalOrders }}</div>
      <div class="stat-label">Tổng đơn hàng</div>
      <div class="stat-date">Ngày cập nhật: {{ statsUpdated.orders }}</div>
    </div>

    <!-- Card 3: Tổng doanh thu -->
    <div class="stat-card red">
      <div class="stat-number">{{ formatCurrency(stats.totalRevenue) }}</div>
      <div class="stat-label">Tổng doanh thu</div>
      <div class="stat-date">Ngày cập nhật: {{ statsUpdated.revenue }}</div>
    </div>

    <!-- Card 4: Tổng sản phẩm -->
    <div class="stat-card green" (click)="navigateTo('/admin/products')" style="cursor: pointer;">
      <div class="stat-number">{{ stats.totalProducts }}</div>
      <div class="stat-label">Tổng sản phẩm</div>
      <div class="stat-date">Ngày cập nhật: {{ statsUpdated.products }}</div>
    </div>

  </div>

  <!-- Chart Section -->
  <div class="chart-section">
    <div class="chart-container">
      <h3 class="chart-title">Biểu Đồ Doanh Thu Theo Tháng Của FITSPORT</h3>

      <div class="chart-wrapper">
        <canvas id="revenueChart"></canvas>
      </div>
    </div>

    <div class="date-filter">
      <h4 class="filter-title">Lọc Theo Thời Gian</h4>
      <div class="filter-group">
        <label>Từ ngày:</label>
        <input type="date" [(ngModel)]="fromDate">
      </div>
      <div class="filter-group">
        <label>Đến ngày:</label>
        <input type="date" [(ngModel)]="toDate">
      </div>
      <div class="filter-actions">
        <button class="btn-filter" (click)="applyDateFilter()">Lọc</button>
        <button class="btn-reset" (click)="resetDateFilter()">Reset</button>
      </div>
    </div>
  </div>

<div class="top-products-table-card">
  <h4 class="table-title">Top 5 sản phẩm bán chạy</h4>

  <table class="top-products-table">
    <thead>
      <tr>
        <th>STT</th>
        <th>Hình</th>
        <th>Tên sản phẩm</th>
        <th>Giá</th>
        <th>Đã bán</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let p of topProducts; let i = index">
        <td>{{ i + 1 }}</td>

        <td>
          <img [src]="p.image || '/assets/no-image.png'" alt="{{ p.name }}" class="product-thumb" />
        </td>

        <td class="name-col">{{ p.name }}</td>

        <td>{{ formatCurrency(p.price) }}</td>

        <td class="sold">{{ p.totalSold }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="topProducts.length === 0" class="empty-table">
    Chưa có dữ liệu
  </div>
</div>

<div class="top-products-table-card">
  <h4 class="table-title">Top 5 khách hàng mua nhiều nhất</h4>

  <table class="top-products-table">
    <thead>
      <tr>
        <th>STT</th>
        <th>Tên khách hàng</th>
        <th>Email</th>
        <th>Số đơn</th>
        <th>Tổng chi</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let u of topUsers; let i = index">
        <td>{{ i + 1 }}</td>

        <td class="name-col">{{ u.name }}</td>

        <td>{{ u.email }}</td>

        <td class="sold">{{ u.totalOrders }}</td>

        <td>{{ formatCurrency(u.totalSpent) }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="topUsers.length === 0" class="empty-table">
    Chưa có dữ liệu
  </div>
</div>


</div>
